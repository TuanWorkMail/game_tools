<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<input type="text" value="1" id="number0">
<input type="button" value="outputJson" onclick="outputJson()">
<input type="button" value="outputSwf" onclick="outputSwf()">
<div id="output"></div>

<script src="StarSilverAdjust.js"></script>

<script>

    function calculate() {
        for (var i = 0; i < json.length; i++) {
            if (json[i].quality === '4') {
                var
                        number0 = document.getElementById('number0').value,
                        result,
                        number = (number0 * Math.pow(1.5, 9)),                            //round
                        number2 = (number0 * Math.pow(1.5, 9) * Math.pow(1.3, 10));       //round

//                json[i].level = +json[i].level;

                if (0 <= json[i].level && json[i].level < 10) {     // 0 > 9

                    result = (number0 * Math.pow(1.5, json[i].level));                    //round

                } else if (9 < json[i].level && json[i].level < 20) {     // 10 > 19

                    result = (number * Math.pow(1.3, (json[i].level - 9)));               //round

                } else if (19 < json[i].level && json[i].level < 30) {    // 20 > 29

                    result = (number2 * Math.pow(1.2, (json[i].level - 19)));             //round

                } else {
                    console.log('unidentify level : ' + json[i].level);
                }
                json[i].bindSilver = result;
                json[i].silver = result;
            }
        }
    }

    function outputJson(){
        calculate();

        var html = '[{<br/>';

        for (var i = 0; i < json.length; i++) {
            var first = true;

            for (var key2 in json[i]) {
                if (json[i].hasOwnProperty(key2)) {

                    if (first) {
                        first = false;
                        html += '"' + key2 + '":"' + json[i][key2] + '"';
                    } else {
                        html += ',<br/>"' + key2 + '":"' + json[i][key2] + '"';
                    }
                }
            }

            if (i < json.length - 1) html += '<br/>' + '},{' + '<br/>';
            else html += '<br/>' + '}]';
        }
        document.getElementById('output').innerHTML = html;
    }

    function outputSwf(){
        calculate();

        var html = '';

        for (var i = 0; i < json.length; i++) {

            html += 'this.DataBase["EquipStarConfig"]['+ json[i].id +'] = {';

            var first = true;

            for (var key2 in json[i]) {
                if (json[i].hasOwnProperty(key2)) {

                    if(key2==='addBress' || key2==='maxRate') continue;

                    if(first){
                        first = false;
                    } else {
                        html += ', ';
                    }
                    html += key2 + ':' + json[i][key2];
                }
            }
            html += '};<br/>';
        }
        document.getElementById('output').innerHTML = html;
    }

</script>
</body>
</html>